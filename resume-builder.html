<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Professional Resume Builder - Create Your Perfect Resume</title>
    <meta name="description" content="Create a professional resume with our real-time resume builder. Features live preview, PDF export, and mobile-responsive design. Build your perfect resume today.">
    
    <!-- Open Graph tags for social media sharing -->
    <meta property="og:title" content="Professional Resume Builder - Create Your Perfect Resume">
    <meta property="og:description" content="Create a professional resume with our real-time resume builder. Features live preview, PDF export, and mobile-responsive design.">
    <meta property="og:type" content="website">
    
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- jsPDF CDN for PDF export -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    
    <!-- Lucide Icons CDN -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    
    <style>
        /* Custom styles for print/PDF generation */
        @media print {
            .no-print { display: none !important; }
            .resume-preview { box-shadow: none !important; }
        }
        
        /* Custom scrollbar for better UX */
        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
        }
        
        .custom-scrollbar::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 3px;
        }
        
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 3px;
        }
        
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: #a8a8a8;
        }
        
        /* Smooth transitions */
        .transition-all {
            transition: all 0.3s ease;
        }
        
        /* Form input focus styles */
        .form-input:focus {
            outline: none;
            ring: 2px;
            ring-blue-500;
            border-color: #3b82f6;
        }
        
        /* Loading spinner animation */
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .animate-spin {
            animation: spin 1s linear infinite;
        }
        
        /* Fade in animation for smooth transitions */
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Professional resume styling */
        .resume-content h1 {
            font-size: 2rem;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 0.5rem;
        }
        
        .resume-content h2 {
            font-size: 1.25rem;
            font-weight: 600;
            color: #374151;
            margin-top: 1.5rem;
            margin-bottom: 0.75rem;
            border-bottom: 2px solid #e5e7eb;
            padding-bottom: 0.25rem;
        }
        
        .resume-content h3 {
            font-size: 1.1rem;
            font-weight: 600;
            color: #4b5563;
            margin-bottom: 0.25rem;
        }
        
        .resume-content .contact-info {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            margin-bottom: 1.5rem;
            color: #6b7280;
        }
        
        .resume-content .job-entry,
        .resume-content .education-entry {
            margin-bottom: 1rem;
        }
        
        .resume-content .job-title,
        .resume-content .degree {
            font-weight: 600;
            color: #374151;
        }
        
        .resume-content .company,
        .resume-content .school {
            color: #6b7280;
            font-style: italic;
        }
        
        .resume-content .date {
            color: #9ca3af;
            font-size: 0.9rem;
        }
        
        .resume-content .description,
        .resume-content .summary {
            margin-top: 0.5rem;
            line-height: 1.6;
            color: #4b5563;
        }
        
        .resume-content .skills-list {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }
        
        .resume-content .skill-tag {
            background-color: #f3f4f6;
            color: #374151;
            padding: 0.25rem 0.75rem;
            border-radius: 1rem;
            font-size: 0.9rem;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Header -->
    <header class="bg-white shadow-sm border-b border-gray-200 no-print">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                    <div class="bg-blue-600 rounded-lg p-2">
                        <i data-lucide="file-text" class="w-6 h-6 text-white"></i>
                    </div>
                    <div>
                        <h1 class="text-xl font-bold text-gray-900">Resume Builder</h1>
                        <p class="text-sm text-gray-600">Create your professional resume</p>
                    </div>
                </div>
                <button id="downloadBtn" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg font-medium transition-all duration-200 flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed">
                    <i data-lucide="download" class="w-4 h-4"></i>
                    <span>Download PDF</span>
                </button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <!-- Form Panel -->
            <div class="bg-white rounded-xl shadow-lg p-6 no-print">
                <div class="mb-6">
                    <h2 class="text-2xl font-bold text-gray-900 mb-2">Resume Information</h2>
                    <p class="text-gray-600">Fill out your information and see your resume update in real-time</p>
                </div>

                <form id="resumeForm" class="space-y-6">
                    <!-- Personal Information -->
                    <div class="space-y-4">
                        <h3 class="text-lg font-semibold text-gray-800 flex items-center space-x-2">
                            <i data-lucide="user" class="w-5 h-5 text-blue-600"></i>
                            <span>Personal Information</span>
                        </h3>
                        
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                            <div>
                                <label for="firstName" class="block text-sm font-medium text-gray-700 mb-1">First Name</label>
                                <input type="text" id="firstName" name="firstName" class="form-input w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all" placeholder="John">
                            </div>
                            <div>
                                <label for="lastName" class="block text-sm font-medium text-gray-700 mb-1">Last Name</label>
                                <input type="text" id="lastName" name="lastName" class="form-input w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all" placeholder="Doe">
                            </div>
                        </div>
                        
                        <div>
                            <label for="email" class="block text-sm font-medium text-gray-700 mb-1">Email</label>
                            <input type="email" id="email" name="email" class="form-input w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all" placeholder="john.doe@email.com">
                        </div>
                        
                        <div>
                            <label for="phone" class="block text-sm font-medium text-gray-700 mb-1">Phone</label>
                            <input type="tel" id="phone" name="phone" class="form-input w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all" placeholder="(555) 123-4567">
                        </div>
                        
                        <div>
                            <label for="location" class="block text-sm font-medium text-gray-700 mb-1">Location</label>
                            <input type="text" id="location" name="location" class="form-input w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all" placeholder="New York, NY">
                        </div>
                    </div>

                    <!-- Professional Summary -->
                    <div class="space-y-4">
                        <h3 class="text-lg font-semibold text-gray-800 flex items-center space-x-2">
                            <i data-lucide="file-text" class="w-5 h-5 text-blue-600"></i>
                            <span>Professional Summary</span>
                        </h3>
                        
                        <div>
                            <label for="summary" class="block text-sm font-medium text-gray-700 mb-1">Summary</label>
                            <textarea id="summary" name="summary" rows="4" class="form-input w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all resize-none" placeholder="Write a brief professional summary highlighting your key qualifications and career objectives..."></textarea>
                        </div>
                    </div>

                    <!-- Experience -->
                    <div class="space-y-4">
                        <h3 class="text-lg font-semibold text-gray-800 flex items-center space-x-2">
                            <i data-lucide="briefcase" class="w-5 h-5 text-blue-600"></i>
                            <span>Work Experience</span>
                        </h3>
                        
                        <div id="experienceContainer" class="space-y-4">
                            <div class="experience-entry p-4 border border-gray-200 rounded-lg">
                                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-3">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">Job Title</label>
                                        <input type="text" name="jobTitle" class="form-input w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all" placeholder="Software Engineer">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">Company</label>
                                        <input type="text" name="company" class="form-input w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all" placeholder="Tech Company">
                                    </div>
                                </div>
                                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-3">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">Start Date</label>
                                        <input type="month" name="startDate" class="form-input w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">End Date</label>
                                        <input type="month" name="endDate" class="form-input w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all">
                                        <div class="mt-1">
                                            <label class="flex items-center">
                                                <input type="checkbox" name="current" class="rounded border-gray-300 text-blue-600 focus:ring-blue-500">
                                                <span class="ml-2 text-sm text-gray-600">Current position</span>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Description</label>
                                    <textarea name="jobDescription" rows="3" class="form-input w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all resize-none" placeholder="Describe your key responsibilities and achievements..."></textarea>
                                </div>
                                <button type="button" class="remove-experience mt-3 text-red-600 hover:text-red-800 text-sm font-medium flex items-center space-x-1">
                                    <i data-lucide="trash-2" class="w-4 h-4"></i>
                                    <span>Remove</span>
                                </button>
                            </div>
                        </div>
                        
                        <button type="button" id="addExperienceBtn" class="w-full py-2 px-4 border-2 border-dashed border-gray-300 rounded-lg text-gray-600 hover:border-blue-500 hover:text-blue-600 transition-all flex items-center justify-center space-x-2">
                            <i data-lucide="plus" class="w-4 h-4"></i>
                            <span>Add Experience</span>
                        </button>
                    </div>

                    <!-- Education -->
                    <div class="space-y-4">
                        <h3 class="text-lg font-semibold text-gray-800 flex items-center space-x-2">
                            <i data-lucide="graduation-cap" class="w-5 h-5 text-blue-600"></i>
                            <span>Education</span>
                        </h3>
                        
                        <div id="educationContainer" class="space-y-4">
                            <div class="education-entry p-4 border border-gray-200 rounded-lg">
                                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-3">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">Degree</label>
                                        <input type="text" name="degree" class="form-input w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all" placeholder="Bachelor of Science">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">School</label>
                                        <input type="text" name="school" class="form-input w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all" placeholder="University Name">
                                    </div>
                                </div>
                                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-3">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">Graduation Year</label>
                                        <input type="number" name="graduationYear" min="1950" max="2030" class="form-input w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all" placeholder="2023">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">GPA (Optional)</label>
                                        <input type="number" name="gpa" step="0.01" min="0" max="4.0" class="form-input w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all" placeholder="3.8">
                                    </div>
                                </div>
                                <button type="button" class="remove-education mt-3 text-red-600 hover:text-red-800 text-sm font-medium flex items-center space-x-1">
                                    <i data-lucide="trash-2" class="w-4 h-4"></i>
                                    <span>Remove</span>
                                </button>
                            </div>
                        </div>
                        
                        <button type="button" id="addEducationBtn" class="w-full py-2 px-4 border-2 border-dashed border-gray-300 rounded-lg text-gray-600 hover:border-blue-500 hover:text-blue-600 transition-all flex items-center justify-center space-x-2">
                            <i data-lucide="plus" class="w-4 h-4"></i>
                            <span>Add Education</span>
                        </button>
                    </div>

                    <!-- Skills -->
                    <div class="space-y-4">
                        <h3 class="text-lg font-semibold text-gray-800 flex items-center space-x-2">
                            <i data-lucide="code" class="w-5 h-5 text-blue-600"></i>
                            <span>Skills</span>
                        </h3>
                        
                        <div>
                            <label for="skills" class="block text-sm font-medium text-gray-700 mb-1">Skills (comma-separated)</label>
                            <textarea id="skills" name="skills" rows="3" class="form-input w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all resize-none" placeholder="JavaScript, React, Node.js, Python, SQL, Git"></textarea>
                            <p class="mt-1 text-xs text-gray-500">Separate each skill with a comma</p>
                        </div>
                    </div>
                </form>
            </div>

            <!-- Preview Panel -->
            <div class="bg-white rounded-xl shadow-lg overflow-hidden">
                <div class="bg-gray-50 px-6 py-4 border-b border-gray-200 no-print">
                    <h2 class="text-lg font-semibold text-gray-900 flex items-center space-x-2">
                        <i data-lucide="eye" class="w-5 h-5 text-blue-600"></i>
                        <span>Live Preview</span>
                    </h2>
                </div>
                
                <div id="resumePreview" class="resume-preview p-8 custom-scrollbar overflow-y-auto" style="height: 800px;">
                    <div class="resume-content fade-in">
                        <!-- Header Section -->
                        <div class="text-center mb-8">
                            <h1 id="previewName" class="text-4xl font-bold text-gray-900 mb-2">Your Name</h1>
                            <div id="previewContact" class="contact-info justify-center text-gray-600">
                                <span id="previewEmail">your.email@example.com</span>
                                <span>•</span>
                                <span id="previewPhone">(555) 123-4567</span>
                                <span>•</span>
                                <span id="previewLocation">Your Location</span>
                            </div>
                        </div>

                        <!-- Professional Summary -->
                        <div id="summarySection" class="mb-8" style="display: none;">
                            <h2>Professional Summary</h2>
                            <div id="previewSummary" class="summary"></div>
                        </div>

                        <!-- Work Experience -->
                        <div id="experienceSection" class="mb-8" style="display: none;">
                            <h2>Work Experience</h2>
                            <div id="previewExperience"></div>
                        </div>

                        <!-- Education -->
                        <div id="educationSection" class="mb-8" style="display: none;">
                            <h2>Education</h2>
                            <div id="previewEducation"></div>
                        </div>

                        <!-- Skills -->
                        <div id="skillsSection" class="mb-8" style="display: none;">
                            <h2>Skills</h2>
                            <div id="previewSkills" class="skills-list"></div>
                        </div>

                        <!-- Placeholder when no data -->
                        <div id="placeholderContent" class="text-center text-gray-500 py-12">
                            <i data-lucide="file-text" class="w-16 h-16 mx-auto mb-4 text-gray-300"></i>
                            <h3 class="text-lg font-medium mb-2">Start Building Your Resume</h3>
                            <p>Fill out the form on the left to see your resume come to life!</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-lg p-6 flex items-center space-x-3">
            <div class="animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"></div>
            <span class="text-gray-700">Generating PDF...</span>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="fixed bottom-4 right-4 bg-green-600 text-white px-6 py-3 rounded-lg shadow-lg transform translate-y-full transition-transform duration-300 z-40">
        <div class="flex items-center space-x-2">
            <i data-lucide="check-circle" class="w-5 h-5"></i>
            <span id="toastMessage">Success!</span>
        </div>
    </div>

    <script>
        // Initialize Lucide icons
        lucide.createIcons();

        // Global state
        let resumeData = {
            firstName: '',
            lastName: '',
            email: '',
            phone: '',
            location: '',
            summary: '',
            experience: [],
            education: [],
            skills: []
        };

        // Utility functions
        function showToast(message, type = 'success') {
            const toast = document.getElementById('toast');
            const toastMessage = document.getElementById('toastMessage');
            
            toastMessage.textContent = message;
            toast.className = `fixed bottom-4 right-4 px-6 py-3 rounded-lg shadow-lg transform transition-transform duration-300 z-40 ${
                type === 'success' ? 'bg-green-600 text-white' : 'bg-red-600 text-white'
            }`;
            
            toast.style.transform = 'translateY(0)';
            
            setTimeout(() => {
                toast.style.transform = 'translateY(100%)';
            }, 3000);
        }

        function showLoading() {
            document.getElementById('loadingOverlay').classList.remove('hidden');
        }

        function hideLoading() {
            document.getElementById('loadingOverlay').classList.add('hidden');
        }

        function formatDate(dateString) {
            if (!dateString) return '';
            const date = new Date(dateString + '-01');
            return date.toLocaleDateString('en-US', { year: 'numeric', month: 'long' });
        }

        function formatDateRange(start, end, isCurrent) {
            const startFormatted = formatDate(start);
            const endFormatted = isCurrent ? 'Present' : formatDate(end);
            return `${startFormatted} - ${endFormatted}`;
        }

        // Form handling
        function collectFormData() {
            const form = document.getElementById('resumeForm');
            const formData = new FormData(form);
            
            // Basic information
            resumeData.firstName = formData.get('firstName') || '';
            resumeData.lastName = formData.get('lastName') || '';
            resumeData.email = formData.get('email') || '';
            resumeData.phone = formData.get('phone') || '';
            resumeData.location = formData.get('location') || '';
            resumeData.summary = formData.get('summary') || '';
            resumeData.skills = formData.get('skills') ? formData.get('skills').split(',').map(s => s.trim()).filter(s => s) : [];

            // Experience
            resumeData.experience = [];
            const experienceEntries = document.querySelectorAll('.experience-entry');
            experienceEntries.forEach((entry, index) => {
                const jobTitle = entry.querySelector('input[name="jobTitle"]').value;
                const company = entry.querySelector('input[name="company"]').value;
                const startDate = entry.querySelector('input[name="startDate"]').value;
                const endDate = entry.querySelector('input[name="endDate"]').value;
                const isCurrent = entry.querySelector('input[name="current"]').checked;
                const description = entry.querySelector('textarea[name="jobDescription"]').value;

                if (jobTitle || company || startDate || description) {
                    resumeData.experience.push({
                        jobTitle,
                        company,
                        startDate,
                        endDate,
                        isCurrent,
                        description
                    });
                }
            });

            // Education
            resumeData.education = [];
            const educationEntries = document.querySelectorAll('.education-entry');
            educationEntries.forEach((entry, index) => {
                const degree = entry.querySelector('input[name="degree"]').value;
                const school = entry.querySelector('input[name="school"]').value;
                const graduationYear = entry.querySelector('input[name="graduationYear"]').value;
                const gpa = entry.querySelector('input[name="gpa"]').value;

                if (degree || school || graduationYear) {
                    resumeData.education.push({
                        degree,
                        school,
                        graduationYear,
                        gpa
                    });
                }
            });
        }

        function updatePreview() {
            collectFormData();

            // Update name
            const fullName = `${resumeData.firstName} ${resumeData.lastName}`.trim();
            document.getElementById('previewName').textContent = fullName || 'Your Name';

            // Update contact info
            const contactParts = [];
            if (resumeData.email) contactParts.push(resumeData.email);
            if (resumeData.phone) contactParts.push(resumeData.phone);
            if (resumeData.location) contactParts.push(resumeData.location);
            
            const contactContainer = document.getElementById('previewContact');
            if (contactParts.length > 0) {
                contactContainer.innerHTML = contactParts.join(' • ');
            } else {
                contactContainer.innerHTML = 'your.email@example.com • (555) 123-4567 • Your Location';
            }

            // Update summary
            const summarySection = document.getElementById('summarySection');
            const previewSummary = document.getElementById('previewSummary');
            if (resumeData.summary) {
                previewSummary.textContent = resumeData.summary;
                summarySection.style.display = 'block';
            } else {
                summarySection.style.display = 'none';
            }

            // Update experience
            const experienceSection = document.getElementById('experienceSection');
            const previewExperience = document.getElementById('previewExperience');
            if (resumeData.experience.length > 0) {
                previewExperience.innerHTML = resumeData.experience.map(exp => `
                    <div class="job-entry">
                        <h3 class="job-title">${exp.jobTitle}</h3>
                        <div class="company">${exp.company}</div>
                        <div class="date">${formatDateRange(exp.startDate, exp.endDate, exp.isCurrent)}</div>
                        ${exp.description ? `<div class="description">${exp.description}</div>` : ''}
                    </div>
                `).join('');
                experienceSection.style.display = 'block';
            } else {
                experienceSection.style.display = 'none';
            }

            // Update education
            const educationSection = document.getElementById('educationSection');
            const previewEducation = document.getElementById('previewEducation');
            if (resumeData.education.length > 0) {
                previewEducation.innerHTML = resumeData.education.map(edu => `
                    <div class="education-entry">
                        <h3 class="degree">${edu.degree}</h3>
                        <div class="school">${edu.school}</div>
                        <div class="date">${edu.graduationYear}${edu.gpa ? ` • GPA: ${edu.gpa}` : ''}</div>
                    </div>
                `).join('');
                educationSection.style.display = 'block';
            } else {
                educationSection.style.display = 'none';
            }

            // Update skills
            const skillsSection = document.getElementById('skillsSection');
            const previewSkills = document.getElementById('previewSkills');
            if (resumeData.skills.length > 0) {
                previewSkills.innerHTML = resumeData.skills.map(skill => 
                    `<span class="skill-tag">${skill}</span>`
                ).join('');
                skillsSection.style.display = 'block';
            } else {
                skillsSection.style.display = 'none';
            }

            // Show/hide placeholder
            const hasContent = fullName !== 'Your Name' || 
                             resumeData.summary || 
                             resumeData.experience.length > 0 || 
                             resumeData.education.length > 0 || 
                             resumeData.skills.length > 0;
            
            document.getElementById('placeholderContent').style.display = hasContent ? 'none' : 'block';
        }

        // Add/remove experience entries
        function addExperienceEntry() {
            const container = document.getElementById('experienceContainer');
            const newEntry = document.createElement('div');
            newEntry.className = 'experience-entry p-4 border border-gray-200 rounded-lg fade-in';
            newEntry.innerHTML = `
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-3">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Job Title</label>
                        <input type="text" name="jobTitle" class="form-input w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Company</label>
                        <input type="text" name="company" class="form-input w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all">
                    </div>
                </div>
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-3">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Start Date</label>
                        <input type="month" name="startDate" class="form-input w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">End Date</label>
                        <input type="month" name="endDate" class="form-input w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all">
                        <div class="mt-1">
                            <label class="flex items-center">
                                <input type="checkbox" name="current" class="rounded border-gray-300 text-blue-600 focus:ring-blue-500">
                                <span class="ml-2 text-sm text-gray-600">Current position</span>
                            </label>
                        </div>
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Description</label>
                    <textarea name="jobDescription" rows="3" class="form-input w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all resize-none"></textarea>
                </div>
                <button type="button" class="remove-experience mt-3 text-red-600 hover:text-red-800 text-sm font-medium flex items-center space-x-1">
                    <i data-lucide="trash-2" class="w-4 h-4"></i>
                    <span>Remove</span>
                </button>
            `;
            
            container.appendChild(newEntry);
            
            // Add event listeners
            addEventListenersToEntry(newEntry);
            lucide.createIcons();
        }

        function addEducationEntry() {
            const container = document.getElementById('educationContainer');
            const newEntry = document.createElement('div');
            newEntry.className = 'education-entry p-4 border border-gray-200 rounded-lg fade-in';
            newEntry.innerHTML = `
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-3">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Degree</label>
                        <input type="text" name="degree" class="form-input w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">School</label>
                        <input type="text" name="school" class="form-input w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all">
                    </div>
                </div>
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-3">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Graduation Year</label>
                        <input type="number" name="graduationYear" min="1950" max="2030" class="form-input w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">GPA (Optional)</label>
                        <input type="number" name="gpa" step="0.01" min="0" max="4.0" class="form-input w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all">
                    </div>
                </div>
                <button type="button" class="remove-education mt-3 text-red-600 hover:text-red-800 text-sm font-medium flex items-center space-x-1">
                    <i data-lucide="trash-2" class="w-4 h-4"></i>
                    <span>Remove</span>
                </button>
            `;
            
            container.appendChild(newEntry);
            
            // Add event listeners
            addEventListenersToEntry(newEntry);
            lucide.createIcons();
        }

        function addEventListenersToEntry(entry) {
            // Add input event listeners
            const inputs = entry.querySelectorAll('input, textarea, select');
            inputs.forEach(input => {
                input.addEventListener('input', updatePreview);
                input.addEventListener('change', updatePreview);
            });

            // Add remove button listener
            const removeBtn = entry.querySelector('.remove-experience, .remove-education');
            if (removeBtn) {
                removeBtn.addEventListener('click', () => {
                    entry.remove();
                    updatePreview();
                });
            }
        }

        // PDF Generation
        async function generatePDF() {
            try {
                showLoading();
                
                // Collect latest data
                collectFormData();
                
                // Validate required fields
                if (!resumeData.firstName && !resumeData.lastName) {
                    throw new Error('Please enter your name to generate a PDF');
                }

                const { jsPDF } = window.jspdf;
                const doc = new jsPDF();
                
                let yPosition = 20;
                const leftMargin = 20;
                const pageWidth = doc.internal.pageSize.getWidth();
                const contentWidth = pageWidth - (leftMargin * 2);
                
                // Helper function to add text with word wrapping
                function addText(text, x, y, options = {}) {
                    const fontSize = options.fontSize || 12;
                    const fontStyle = options.fontStyle || 'normal';
                    const maxWidth = options.maxWidth || contentWidth;
                    
                    doc.setFontSize(fontSize);
                    doc.setFont('helvetica', fontStyle);
                    
                    const lines = doc.splitTextToSize(text, maxWidth);
                    doc.text(lines, x, y);
                    
                    return y + (lines.length * fontSize * 0.5);
                }
                
                // Header - Name
                const fullName = `${resumeData.firstName} ${resumeData.lastName}`.trim();
                doc.setFontSize(24);
                doc.setFont('helvetica', 'bold');
                doc.text(fullName, pageWidth / 2, yPosition, { align: 'center' });
                yPosition += 15;
                
                // Contact Information
                const contactParts = [];
                if (resumeData.email) contactParts.push(resumeData.email);
                if (resumeData.phone) contactParts.push(resumeData.phone);
                if (resumeData.location) contactParts.push(resumeData.location);
                
                if (contactParts.length > 0) {
                    doc.setFontSize(11);
                    doc.setFont('helvetica', 'normal');
                    doc.text(contactParts.join(' • '), pageWidth / 2, yPosition, { align: 'center' });
                    yPosition += 15;
                }
                
                // Professional Summary
                if (resumeData.summary) {
                    doc.setFontSize(14);
                    doc.setFont('helvetica', 'bold');
                    doc.text('PROFESSIONAL SUMMARY', leftMargin, yPosition);
                    yPosition += 8;
                    
                    // Add line under heading
                    doc.setLineWidth(0.5);
                    doc.line(leftMargin, yPosition, pageWidth - leftMargin, yPosition);
                    yPosition += 8;
                    
                    yPosition = addText(resumeData.summary, leftMargin, yPosition, { fontSize: 11 });
                    yPosition += 10;
                }
                
                // Work Experience
                if (resumeData.experience.length > 0) {
                    doc.setFontSize(14);
                    doc.setFont('helvetica', 'bold');
                    doc.text('WORK EXPERIENCE', leftMargin, yPosition);
                    yPosition += 8;
                    
                    // Add line under heading
                    doc.setLineWidth(0.5);
                    doc.line(leftMargin, yPosition, pageWidth - leftMargin, yPosition);
                    yPosition += 8;
                    
                    resumeData.experience.forEach((exp, index) => {
                        // Job Title
                        doc.setFontSize(12);
                        doc.setFont('helvetica', 'bold');
                        doc.text(exp.jobTitle, leftMargin, yPosition);
                        yPosition += 6;
                        
                        // Company and Date
                        doc.setFontSize(11);
                        doc.setFont('helvetica', 'italic');
                        const dateRange = formatDateRange(exp.startDate, exp.endDate, exp.isCurrent);
                        doc.text(exp.company, leftMargin, yPosition);
                        doc.text(dateRange, pageWidth - leftMargin, yPosition, { align: 'right' });
                        yPosition += 6;
                        
                        // Description
                        if (exp.description) {
                            yPosition = addText(exp.description, leftMargin, yPosition, { fontSize: 10 });
                        }
                        
                        yPosition += 8;
                        
                        // Check if we need a new page
                        if (yPosition > 250) {
                            doc.addPage();
                            yPosition = 20;
                        }
                    });
                    
                    yPosition += 5;
                }
                
                // Education
                if (resumeData.education.length > 0) {
                    // Check if we need a new page
                    if (yPosition > 220) {
                        doc.addPage();
                        yPosition = 20;
                    }
                    
                    doc.setFontSize(14);
                    doc.setFont('helvetica', 'bold');
                    doc.text('EDUCATION', leftMargin, yPosition);
                    yPosition += 8;
                    
                    // Add line under heading
                    doc.setLineWidth(0.5);
                    doc.line(leftMargin, yPosition, pageWidth - leftMargin, yPosition);
                    yPosition += 8;
                    
                    resumeData.education.forEach((edu, index) => {
                        // Degree
                        doc.setFontSize(12);
                        doc.setFont('helvetica', 'bold');
                        doc.text(edu.degree, leftMargin, yPosition);
                        yPosition += 6;
                        
                        // School and Year/GPA
                        doc.setFontSize(11);
                        doc.setFont('helvetica', 'italic');
                        doc.text(edu.school, leftMargin, yPosition);
                        
                        const rightText = edu.gpa ? `${edu.graduationYear} • GPA: ${edu.gpa}` : edu.graduationYear;
                        doc.text(rightText, pageWidth - leftMargin, yPosition, { align: 'right' });
                        yPosition += 10;
                    });
                    
                    yPosition += 5;
                }
                
                // Skills
                if (resumeData.skills.length > 0) {
                    // Check if we need a new page
                    if (yPosition > 240) {
                        doc.addPage();
                        yPosition = 20;
                    }
                    
                    doc.setFontSize(14);
                    doc.setFont('helvetica', 'bold');
                    doc.text('SKILLS', leftMargin, yPosition);
                    yPosition += 8;
                    
                    // Add line under heading
                    doc.setLineWidth(0.5);
                    doc.line(leftMargin, yPosition, pageWidth - leftMargin, yPosition);
                    yPosition += 8;
                    
                    const skillsText = resumeData.skills.join(' • ');
                    yPosition = addText(skillsText, leftMargin, yPosition, { fontSize: 11 });
                }
                
                // Generate filename
                const filename = fullName ? `${fullName.replace(/\s+/g, '_')}_Resume.pdf` : 'Resume.pdf';
                
                // Save the PDF
                doc.save(filename);
                
                hideLoading();
                showToast('PDF downloaded successfully!');
                
            } catch (error) {
                hideLoading();
                console.error('PDF generation error:', error);
                showToast(error.message || 'Failed to generate PDF. Please try again.', 'error');
            }
        }

        // Event Listeners
        document.addEventListener('DOMContentLoaded', function() {
            // Form input listeners
            const formInputs = document.querySelectorAll('#resumeForm input, #resumeForm textarea, #resumeForm select');
            formInputs.forEach(input => {
                input.addEventListener('input', updatePreview);
                input.addEventListener('change', updatePreview);
            });

            // Add/remove entry listeners
            document.getElementById('addExperienceBtn').addEventListener('click', addExperienceEntry);
            document.getElementById('addEducationBtn').addEventListener('click', addEducationEntry);

            // Initial remove button listeners
            document.querySelectorAll('.remove-experience, .remove-education').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    e.target.closest('.experience-entry, .education-entry').remove();
                    updatePreview();
                });
            });

            // PDF download listener
            document.getElementById('downloadBtn').addEventListener('click', generatePDF);

            // Current position checkbox listeners
            document.querySelectorAll('input[name="current"]').forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    const endDateInput = this.closest('.experience-entry').querySelector('input[name="endDate"]');
                    endDateInput.disabled = this.checked;
                    if (this.checked) {
                        endDateInput.value = '';
                    }
                    updatePreview();
                });
            });

            // Initial preview update
            updatePreview();
        });

        // Keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            // Ctrl/Cmd + S to download PDF
            if ((e.ctrlKey || e.metaKey) && e.key === 's') {
                e.preventDefault();
                generatePDF();
            }
        });

        // Auto-save form data to localStorage
        function saveFormData() {
            collectFormData();
            localStorage.setItem('resumeBuilderData', JSON.stringify(resumeData));
        }

        function loadFormData() {
            const savedData = localStorage.getItem('resumeBuilderData');
            if (savedData) {
                try {
                    const data = JSON.parse(savedData);
                    
                    // Populate basic fields
                    document.getElementById('firstName').value = data.firstName || '';
                    document.getElementById('lastName').value = data.lastName || '';
                    document.getElementById('email').value = data.email || '';
                    document.getElementById('phone').value = data.phone || '';
                    document.getElementById('location').value = data.location || '';
                    document.getElementById('summary').value = data.summary || '';
                    document.getElementById('skills').value = data.skills ? data.skills.join(', ') : '';
                    
                    // Populate experience entries
                    if (data.experience && data.experience.length > 1) {
                        for (let i = 1; i < data.experience.length; i++) {
                            addExperienceEntry();
                        }
                    }
                    
                    // Populate education entries
                    if (data.education && data.education.length > 1) {
                        for (let i = 1; i < data.education.length; i++) {
                            addEducationEntry();
                        }
                    }
                    
                    // Fill experience data
                    const experienceEntries = document.querySelectorAll('.experience-entry');
                    data.experience?.forEach((exp, index) => {
                        if (experienceEntries[index]) {
                            const entry = experienceEntries[index];
                            entry.querySelector('input[name="jobTitle"]').value = exp.jobTitle || '';
                            entry.querySelector('input[name="company"]').value = exp.company || '';
                            entry.querySelector('input[name="startDate"]').value = exp.startDate || '';
                            entry.querySelector('input[name="endDate"]').value = exp.endDate || '';
                            entry.querySelector('input[name="current"]').checked = exp.isCurrent || false;
                            entry.querySelector('textarea[name="jobDescription"]').value = exp.description || '';
                        }
                    });
                    
                    // Fill education data
                    const educationEntries = document.querySelectorAll('.education-entry');
                    data.education?.forEach((edu, index) => {
                        if (educationEntries[index]) {
                            const entry = educationEntries[index];
                            entry.querySelector('input[name="degree"]').value = edu.degree || '';
                            entry.querySelector('input[name="school"]').value = edu.school || '';
                            entry.querySelector('input[name="graduationYear"]').value = edu.graduationYear || '';
                            entry.querySelector('input[name="gpa"]').value = edu.gpa || '';
                        }
                    });
                    
                    updatePreview();
                } catch (error) {
                    console.error('Error loading saved data:', error);
                }
            }
        }

        // Auto-save every 2 seconds when user is typing
        let saveTimeout;
        document.addEventListener('input', function(e) {
            if (e.target.closest('#resumeForm')) {
                clearTimeout(saveTimeout);
                saveTimeout = setTimeout(saveFormData, 2000);
            }
        });

        // Load saved data on page load
        document.addEventListener('DOMContentLoaded', loadFormData);

        // Save data before leaving page
        window.addEventListener('beforeunload', saveFormData);
    </script>
</body>
</html>
